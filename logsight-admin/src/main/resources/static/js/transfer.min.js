(function(e,d,b){var c=function(g,f){this.option=f;this.$el=e(g);this.selectData=[];this.unselectData=[];this.init()};c.DEFAULTS={titles:["",""],search:true,showRefresh:false,clickToSelect:true,pagination:false,autoHeight:false,url:"",type:"get",queryParams:{},contentType:"application/json",paginationDetail:false,maxSelect:undefined,uniqueId:"",dataSource:[],selectdataSource:undefined,diffKey:"flag",selectColumns:[],unselectColumns:[]};c.prototype={init:function(){this.initoption();this.initContainer();this.initBothTable();if(this.option.url){this.initServer()}else{this.classifyData()}this.initEvent()},initContainer:function(){var g=this;var f=['<div class="col-sm-5 transferBox">','<h5 class="unselectTitle text-center" style="margin: 0;padding: 5px 0 0 0;">'+this.unselectTitle+'<span style="margin-left: 5px;">(<span id="checkedNum1"></span><span id="unselectTotalNum"></span>)</span></h5>','<table id="transferUnselectTable"></table>',"</div>",'<div class="transferBtn" style="height: 100%;width: 40px;margin: 10px;">','<div class="btnList">','<span class="btn btn-default forwardBtn" style="width: 40px;"><svg class="bi bi-chevron-double-right" width="16px" height="16px" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z" clip-rule="evenodd"/>\n  <path fill-rule="evenodd" d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z" clip-rule="evenodd"/>\n</svg></span>','<span class="btn btn-default backwardBtn" style="width: 40px;"><svg class="bi bi-chevron-double-left" width="16px" height="16px" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" clip-rule="evenodd"/>\n  <path fill-rule="evenodd" d="M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" clip-rule="evenodd"/>\n</svg></span>',"</div>","</div>",'<div class="col-sm-5 transferBox">','<h5 class="selectTitle text-center" style="margin: 0;padding: 5px 0 0 0;">'+this.selectTitle+'<span style="margin-left: 5px;">(<span id="checkedNum2"></span><span id="selectTotalNum"></span>)</span></h5>','<table id="transferSelectTable"></table>',"</div>"].join("");this.$el.html(f);this.$unselectTable=this.$el.find("#transferUnselectTable");this.$unselectTotalNum=this.$el.find("#unselectTotalNum");this.$checkedNum1=this.$el.find("#checkedNum1");this.$forwardBtn=this.$el.find(".forwardBtn");this.$selectTable=this.$el.find("#transferSelectTable");this.$selectTotalNum=this.$el.find("#selectTotalNum");this.$checkedNum2=this.$el.find("#checkedNum2");this.$backwardBtn=this.$el.find(".backwardBtn");this.option.height=this.$el.outerHeight()-this.$el.find("h5.unselectTitle").outerHeight()-100},initoption:function(){if(typeof this.option.titles=="string"||(this.option.titles instanceof Array&&this.option.titles.length==1)){this.selectTitle=this.unselectTitle=this.option.titles+""}else{if(this.option.titles instanceof Array&&this.option.titles.length>1){this.unselectTitle=this.option.titles[0];this.selectTitle=this.option.titles[1]}}if(this.option.selectColumns instanceof Array&&this.option.unselectColumns instanceof Array&&(!this.option.selectColumns.length&&this.option.unselectColumns.length)){this.option.selectColumns=JSON.parse(JSON.stringify(this.option.unselectColumns))}else{if(this.option.selectColumns instanceof Array&&this.option.unselectColumns instanceof Array&&(this.option.selectColumns.length&&!this.option.unselectColumns.length)){this.option.unselectColumns=JSON.parse(JSON.stringify(this.option.selectColumns))}else{if(!this.option.selectColumns instanceof Array||!this.option.unselectColumns instanceof Array){return false}}}this.option.selectColumns[0].field=this.option.diffKey+"s";this.option.unselectColumns[0].field=this.option.diffKey},classifyData:function(){if(!this.option.dataSource){return false}if(this.option.selectdataSource){this.selectData=this.option.selectdataSource;this.unselectData=this.option.dataSource}else{for(var f=0;f<this.option.dataSource.length;f++){if(this.option.dataSource[f][this.option.diffKey]){this.selectData.push(this.option.dataSource[f])}else{this.unselectData.push(this.option.dataSource[f])}}}this.refreshTable();this.showTotalNum()},refreshTable:function(){this.$unselectTable.bootstrapTable("load",this.unselectData);this.$selectTable.bootstrapTable("load",this.selectData)},showTotalNum:function(){this.$unselectTotalNum.html(this.unselectData.length);this.$selectTotalNum.html(this.selectData.length)},initBothTable:function(){var f=this;this.$unselectBootstrapTable=this.$unselectTable.bootstrapTable({search:f.option.search,showRefresh:f.option.showRefresh,showToggle:false,showColumns:false,paginationDetail:f.option.paginationDetail,clickToSelect:f.option.clickToSelect,pagination:f.option.pagination,sidePagination:"client",autoHeight:false,height:f.option.height,data:[],sortName:"createTime",sortOrder:"desc",uniqueId:f.option.uniqueId,columns:f.option.unselectColumns});this.$selectBootstrapTable=this.$selectTable.bootstrapTable({search:f.option.search,showRefresh:f.option.showRefresh,showToggle:false,paginationDetail:f.option.paginationDetail,showColumns:false,clickToSelect:f.option.clickToSelect,pagination:f.option.pagination,autoHeight:false,height:f.option.height,data:[],sortName:"createTime",sortOrder:"desc",uniqueId:f.option.uniqueId,columns:f.option.selectColumns});this.$selectBootstrapTable.on("check.bs.table check-all.bs.table uncheck.bs.table uncheck-all.bs.table",function(i,h){var g=f.$selectTable.find('tr input[name="btSelectItem"]:checked').length;if(g){f.$backwardBtn.removeClass("btn-default").addClass("btn-info");f.$checkedNum2.html(g+"/")}else{f.$backwardBtn.removeClass("btn-info").addClass("btn-default");f.$checkedNum2.html("")}});this.$unselectBootstrapTable.on("check.bs.table check-all.bs.table uncheck.bs.table uncheck-all.bs.table",function(i,h){var g=f.$unselectTable.find('tr input[name="btSelectItem"]:checked').length;if(g){f.$forwardBtn.removeClass("btn-default").addClass("btn-info");f.$checkedNum1.html(g+"/")}else{f.$forwardBtn.removeClass("btn-info").addClass("btn-default");f.$checkedNum1.html("")}})},initServer:function(){var f=this;if(this.option.url){e.ajax({url:f.option.url,type:f.option.type,contentType:f.option.contentType,data:f.option.contentType==="application/json"&&f.option.type==="post"?JSON.stringify(f.option.queryParams):f.option.queryParams,success:function(g){if(g.success){f.option.dataSource=g.data;f.selectData=[];f.unselectData=[];f.classifyData()}},error:function(g){console.log(11)}})}},initEvent:function(){var f=this;this.$forwardBtn.click(function(){f.transferData(e(this),1)});this.$backwardBtn.click(function(){f.transferData(e(this),0)})},getSelect:function(f){return e.map(f,function(h,g){if(e(h).find('input[name="btSelectItem"]').is(":checked")){return parseInt(e(h).attr("data-uniqueid"))}})},transferData:function(g,k){var l=this;if(!g.hasClass("btn-info")){return false}if(k){var j=this.getSelect(this.$unselectTable.find("tbody tr"));if((this.option.maxSelect-0)&&typeof(this.option.maxSelect-0)=="number"){var f=j.length+this.selectData.length;if(f>this.option.maxSelect){alert(this.selectTitle+"最多只能存在"+this.option.maxSelect+"个，您选的太多了！");return false}}for(var h=0;h<this.unselectData.length;h++){if(j.indexOf(this.unselectData[h][this.option.uniqueId])>=0){this.unselectData[h][this.option.selectColumns[0].field]=false;this.selectData.push(this.unselectData[h]);this.unselectData.splice(h,1);h--}}this.refreshTable();this.$forwardBtn.removeClass("btn-info").addClass("btn-default");this.$checkedNum1.html("")}else{var j=this.getSelect(this.$selectTable.find("tbody tr"));for(var h=0;h<this.selectData.length;h++){if(j.indexOf(this.selectData[h][this.option.uniqueId])>=0){this.selectData[h][this.option.unselectColumns[0].field]=false;this.unselectData.push(this.selectData[h]);this.selectData.splice(h,1);h--}}this.refreshTable();this.$backwardBtn.removeClass("btn-info").addClass("btn-default");this.$checkedNum2.html("")}this.showTotalNum()},getData:function(g,f){if(!g){return false}if(f&&typeof f=="string"){return e.map(this[g],function(i,h){return i[f]})}else{if(f&&f instanceof Array&&f.length>0){return e.map(this[g],function(k,h){var l={};for(var j=0;j<f.length;j++){l[f[j]]=k[f[j]]}return l})}else{return this[g]}}},destroy:function(){this.$el.html("")},refresh:function(f){if(this.option.url){this.initServer()}else{this.option.dataSource=JSON.parse(JSON.stringify(f));this.selectData=[];this.unselectData=[];this.classifyData()}},refreshLeft:function(g){var j=this.option.uniqueId;var h=this.getData("selectData",j);for(var f=0;f<g.length;f++){if(h.indexOf(g[f][j])>=0){g.splice(f,1);f--}}this.$unselectTable.bootstrapTable("load",g);this.unselectData=g;this.showTotalNum()},refreshRight:function(g){this.selectData=g;var j=this.option.uniqueId;var h=this.getData("selectData",j);for(var f=0;f<this.unselectData.length;f++){if(h.indexOf(this.unselectData[f][j])>=0){this.unselectData.splice(f,1);f--}}this.$selectTable.bootstrapTable("load",g);this.$unselectTable.bootstrapTable("load",this.unselectData);this.showTotalNum()}};var a=["refresh","refreshLeft","refreshRight","destroy","getData"];e.fn.transfer=function(g){var i=this,h,f=Array.prototype.slice.call(arguments,1);i.each(function(){var l=e(this),k=l.data("transfer"),j=e.extend({},c.DEFAULTS,l.data(),typeof g==="object"&&g);if(typeof g==="string"){if(e.inArray(g,a)<0){throw new Error("Unknown method: "+g)}if(!k){return}h=k[g].apply(k,f);if(g==="destroy"){l.removeData("transfer")}}if(!k){l.data("transfer",(k=new c(this,j)))}});return typeof h==="undefined"?this:h};e.fn.transfer.Constructor=c;e.fn.transfer.defaults=c.DEFAULTS;e.fn.transfer.methods=a})(jQuery,window,document);