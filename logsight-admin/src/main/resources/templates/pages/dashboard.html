<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<body>
<main th:fragment="dashboard">

    <div class="row">
        <div class="col-4 card text-white bg-primary" style="margin:8px">
            <div >
                <h5 class="text-center" style="margin:5px" th:text="#{i18n.dashboard_title_logfiles}"></h5>
                <div class="card-body" style="padding:0">
                    <div class="row">
                        <svg fill="currentColor" style="height: 70px;margin-bottom: -84px;" class="icon col-3" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"  width="150" height="150"><path d="M927.9 384.1c0.1-0.9 0.1-1.9 0.1-2.8V304c0-61.8-50.2-112-112-112H491.8l-14.3-42.2c-4.4-13-16.6-21.7-30.3-21.7H224c-88.2 0-160 71.8-160 160v448c0 88.2 71.8 160 160 160h576c88.2 0 160-71.8 160-160V480.2c0-36.1-12-69.3-32.1-96.1zM816 255.9c26.5 0 48 21.5 48 48v29.6c-19.6-8.6-41.3-13.4-64-13.4H535.1l-21.7-64.2H816zM896 736c0 25.5-10 49.6-28.2 67.8C849.6 822 825.5 832 800 832H224c-25.5 0-49.6-10-67.8-28.2C138 785.6 128 761.5 128 736V288c0-25.5 10-49.6 28.2-67.8C174.4 202 198.5 192 224 192h200.2l57.6 170.4c4.4 13 16.6 21.7 30.3 21.7H800c25.5 0 49.6 10 67.8 28.2 18.2 18.2 28.2 42.3 28.2 67.8V736z"></path></svg>
                        <span th:text="#{i18n.dashboard_title_logfiles_des}" class="col"></span>
                    </div>
                    <h1 class="display-4  text-center" th:text="${fileCount}" ></h1>
                </div>
            </div>
        </div>
        <div class="col-4 card bg-success text-white" style="margin:8px">
            <h5 class="text-center" style="margin:5px" th:text="#{i18n.dashboard_title_logDisk}"></h5>
            <div class="card-body" style="padding:0">
                <div class="row">
                    <svg fill="currentColor" class="icon col-3" style="height: 70px;margin-bottom: -84px;" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="150" height="150"><path d="M860.8 152.32c-3.84-28.8-28.16-49.92-56.96-49.92H220.16c-28.8 0-53.12 21.76-56.96 49.92l-60.8 453.76V832c0 49.28 40.32 89.6 89.6 89.6h640c49.28 0 89.6-40.32 89.6-89.6V606.08l-60.8-453.76z m-647.04 7.04c0.64-3.2 3.2-5.76 6.4-5.76h583.68c3.2 0 5.76 2.56 6.4 5.76l56.32 423.04H157.44l56.32-423.04zM832 870.4H192c-21.12 0-38.4-17.28-38.4-38.4V633.6h716.8V832c0 21.12-17.28 38.4-38.4 38.4z"></path><path d="M257.28 726.4h352v51.2h-352z m414.72 0h96v51.2h-96z"></path></svg>
                    <span th:text="#{i18n.dashboard_title_logDisk_des}" class="col"></span>
                </div>
                <h1 class="display-4 text-center" th:text="${fileSize}" ></h1>
            </div>
        </div>
        <div class="col-3 card bg-info text-white" style="margin:8px">
            <h5 class="text-center" style="margin:5px" th:text="#{i18n.dashboard_title_logField}"></h5>
            <div class="card-body" style="padding:0">
                <div class="row">
                    <svg fill="currentColor" class="icon col-3" style="height: 70px;margin-bottom: -84px;" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="150" height="150"><path d="M916.89054 679.040411l-63.615876 0L853.274664 510.627746c0-22.716374-18.575054-41.291428-41.292452-41.291428l-273.263687 0L538.718525 342.159824l71.357188 0c22.716374 0 41.292452-18.575054 41.292452-41.292452L651.368164 117.347638c-0.057305-22.660092-18.576077-41.235147-41.34771-41.235147L411.250388 76.112492c-22.771633 0-41.292452 18.575054-41.292452 41.292452l0 183.519734c0 22.716374 18.576077 41.291428 41.292452 41.291428l71.180156 0 0 127.121236L209.109552 469.337341c-22.716374 0-41.291428 18.575054-41.291428 41.291428l0 168.412664-63.615876 0c-22.716374 0-41.23617 18.519796-41.23617 41.292452l0 183.51871c0 22.716374 18.519796 41.291428 41.23617 41.291428L287.778262 945.144024c22.715351 0 41.235147-18.576077 41.235147-41.291428L329.013409 720.332862c0-22.716374-18.519796-41.292452-41.235147-41.292452l-63.6169 0L224.161363 525.678534l258.213923 0 0 153.361877-63.560618 0c-22.715351 0-41.292452 18.576077-41.292452 41.292452l0 183.51871c0 22.716374 18.576077 41.291428 41.292452 41.291428l183.519734 0c22.715351 0 41.292452-18.576077 41.292452-41.291428L643.626853 720.332862c0-22.716374-18.576077-41.292452-41.292452-41.292452l-63.615876 0L538.718525 525.678534l258.213923 0 0 153.361877-63.561641 0c-22.716374 0-41.291428 18.576077-41.291428 41.292452l0 183.51871c0 22.716374 18.575054 41.291428 41.291428 41.291428l183.519734 0c22.717398 0 41.292452-18.576077 41.292452-41.291428L958.182992 720.332862C958.181969 697.560206 939.606915 679.040411 916.89054 679.040411L916.89054 679.040411zM426.301176 285.817608l0-153.3629 168.666444 0 0 153.3629L426.301176 285.817608 426.301176 285.817608zM433.865455 888.744503 433.865455 735.38365l153.361877 0L587.227332 888.744503 433.865455 888.744503 433.865455 888.744503zM901.839753 735.38365 901.839753 888.744503l-153.3629 0L748.476853 735.38365 901.839753 735.38365 901.839753 735.38365zM119.253034 888.744503 119.253034 735.38365l153.418158 0L272.671193 888.744503 119.253034 888.744503 119.253034 888.744503z"></path></svg>
                    <span th:text="#{i18n.dashboard_title_logField_des}" class="col" style="line-height: 48px;"></span>
                </div>
                <h1 class="display-4 text-center" th:text="${fieldCount}" ></h1>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-7">
            <div id="filesize-container"  style="max-height:100%"></div>
        </div>

        <div class="col-5">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col" class="text-center" th:text="#{i18n.dashboard_filetable_filename}"></th>
                        <th scope="col" class="text-center tb-nowrap" th:text="#{i18n.dashboard_filetable_size}"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="maxFiles,maxFilesStat : ${maxFileData}">
                        <td class="tb-break" th:text="${maxFiles.name}"></td>
                        <td class="tb-nowrap text-center" th:text="${maxFiles.size}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script src="http://cdn.highcharts.com.cn/highcharts/8.0.4/highcharts.js"></script>
    <script>
        $("#filesize-container").css("max-height",document.body.clientHeight)
        util.loadStyles("/css/table.css")
        var options = {
            chart: {
                type: 'line'
            },
            title: {
                text: '[[#{i18n.dashboard_filesize_title}]]',
                align:'center'
            },
            xAxis: {
                type: 'datetime',
                labels: {
                    overflow: 'justify'
                }
            },
            yAxis: {
                title: {
                    text: '[[#{i18n.dashboard_filesize_yname}]]'
                },
                minorGridLineWidth: 1,
                alternateGridColor: null,
            },
            tooltip: {
                xDateFormat:'%Y-%m-%d %H:%M',
                valueSuffix: ' M'
            },
            plotOptions: {
                line: {
                    states: {
                        hover: {
                            lineWidth: 2
                        }
                    },
                    pointInterval: 3600000, // one hour
                    pointStart: new Date(new Date().toLocaleDateString()).getTime()-new Date().getTimezoneOffset()*1000*60-24*60*60*1000
                }
            },
            series: [{
                name: 'All',
                data: [[${fileSizeData}]]
            }]
        }
        var chart = Highcharts.chart('filesize-container', options)
        </script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>
</body>
</html>